@*
 * Copyright 2021 HM Revenue & Customs
 *
 *@

@import uk.gov.hmrc.integrationcatalogue.models.EndpointMethod

@this(apiEndpointMethodRequest: ApiEndpointMethodRequest, apiEndpointMethodResponse: ApiEndpointMethodResponse)


@(endpointMethod: EndpointMethod, index: Int)

@getHttpPillClass(method: String) = @{
  method match{
    case "GET" => "govuk-tag govuk-tag--green"
    case "PUT" => "govuk-tag govuk-tag--purple"
    case "POST" => "govuk-tag govuk-tag--blue"
    case "DELETE" => "govuk-tag govuk-tag--red"
  }
}

        <!-- <div class="govuk-endpoints-list-code-box">
          <strong class='@getHttpPillClass(endpointMethod.httpMethod)' id="endpoint-method-@index">
            @endpointMethod.httpMethod
          </strong>
          <br />
          <br />
          <code class="code--slim" id="endpoint-path-@index">@endpointMethod.summary</code>
        </div>
        <br /> -->
        <!-- Accordions -->
        <!-- <div class="govuk-accordion" data-module="govuk-accordion" id="accordion-default"> -->
          <!-- Accordion 1 Requests-->
          <!-- @{
            endpointMethod.request.map(apiEndpointMethodRequest(_)).getOrElse("")
          } -->
         
          <!-- Accordion 2 -->
         <!-- @for(response <- endpointMethod.responses){
          @apiEndpointMethodResponse(response)
        }

       </div> -->


       <div class="govuk-accordion" data-module="govuk-accordion" id="accordion-with-summary-sections">
        <div class="govuk-accordion__section ">
          <div class="govuk-accordion__section-header">
            <h2 class="govuk-accordion__section-heading">
              <span class="govuk-accordion__section-button" id="accordion-with-summary-sections-heading-1">
                @endpointMethod.httpMethod
              </span>
            </h2>
            @if(endpointMethod.summary.isDefined) {
              <div class="govuk-accordion__section-summary govuk-body" id="accordion-with-summary-sections-summary-1">
                <code class="code--slim" id="endpoint-summary-@index">@endpointMethod.summary</code>
              </div>
            }
          </div>
          <div id="accordion-with-summary-sections-content-1" class="govuk-accordion__section-content" aria-labelledby="accordion-with-summary-sections-heading-1">
            <!-- Content -->
            <h1 class="govuk-heading-l" id="request-heading-@index">Request</h1>
            @{
              endpointMethod.request.map(apiEndpointMethodRequest(_)).getOrElse("")
            }
            <h1 class="govuk-heading-l" id="responses-heading-@index">Responses</h1>
            @for(response <- endpointMethod.responses.zipWithIndex){
              @apiEndpointMethodResponse(response._1)
              @if(response._2 != endpointMethod.responses.size - 1) {
              <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible ">
              }
            }
          </div>
        </div>
      </div>

